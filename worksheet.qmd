---
title: "Practice Worksheet: Gerrymandering"
format: typst
---

Recall the 3 quantitative approaches to measuring gerrymandering discussed in lecture:\
1. Mean - Median Score (Grofman, 1983)\
2. Efficiency Gap (Stephanopolous and McGee, 2015)\
3. Ensembles / Extreme Outliers\
Use the following table to practice applying the first two techniques.\

| District | D Votes | R Votes | Result  |
|:---------:|:-------:|:-------:|:--------|
| 1 | 62 | 38 | D wins |
| 2 | 55 | 45 | D wins |
| 3 | 44 | 56 | R wins |
| 4 | 47 | 53 | R wins |
| 5 | 46 | 54 | R wins |
| **Total** | **254** | **246** |          |

```{r}
#| message: false
#| echo: false
library(tidyverse)
votes <- tibble(District = 1:5,
                d_votes = c(62, 55, 44, 47, 46),
                r_votes = c(38, 45, 56, 53, 54),
                result = c(rep("D wins", 2), rep("R wins", 3)))
```

### Q1. Mean-Median Score

Calculate the mean-median score associated with this particular district breakdown of votes.

```{r}
# add code for Q1 here
mean_median_votes <- votes|> 
  mutate(proportion = r_votes/(r_votes+d_votes))|> 
  summarize(mean_median = mean(proportion)- median(proportion))

```

### Q2. Efficiency Gap

Calculate the Efficiency Gap (EG) associated with this particular district breakdown of votes.

*Tip*: it may be helpful to write a function that takes a vector of votes across districts for party A and vector of votes for the party B and returns a vector of the number votes wasted by party A across districts.


```{r}
# add code for Q2 here 
party_D <- votes$d_votes
party_R <- votes$r_votes
wasted_votes <- function(party_d, party_r){
    wasted_votes = c(1:length(party_d))
    for(i in c(1:length(party_d))){
    if (party_d[i] > party_r[i]){
        wasted_votes[i] = party_d[i] - 50 -1} 
    else{
        wasted_votes[i]= party_d[i]}}
        return (sum(wasted_votes))} 
        
wasted_d <- wasted_votes(party_D, party_R)
wasted_r <- wasted_votes(party_R, party_D)
total_votes <- sum(votes$d_votes + votes$r_votes)
EG <- (wasted_d - wasted_r)/ total_votes
EG
```